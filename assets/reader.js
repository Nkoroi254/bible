(function(){if(typeof android==="undefined"){android={setVerse:function(v){console.log("android.setVerse: "+v)},setCopyText:function(v){console.log("android.setCopyText: "+v)},setHighlighted:function(v){console.log("android.setHighlighted: "+v)},showAnnotation:function(v){console.log("android.showAnnotation: "+v)}}}var r,o,b={setup:function(w,v){this.cancel();this.timeoutID=window.setTimeout(function(x){x()},v,w)},cancel:function(){if(typeof this.timeoutID=="number"){window.clearTimeout(this.timeoutID);delete this.timeoutID}}};function t(z,y,v,B){var A=z.querySelectorAll(v);y=y||[];for(var x=0;x<A.length;++x){var w=A.item(x);if(!B||a(w,B,false)){y.push(w)}}}function u(w){var v=[];w=w||document;t(w,v,".chapternum");t(w,v,"sup.versenum");t(w,v,"sup",r);return v}function p(){var w,y,v=NaN,A;A=u();for(var z=0;z<A.length;z++){var x=Math.round(A[z].getBoundingClientRect().top);if(x>=0){if(isNaN(v)||Math.abs(v)>3*x){w=A[z]}else{w=A[z-1]}break}else{v=x}}if(w){android.setVerse(w.textContent.split("-")[0].trim())}}if(typeof String.prototype.endsWith!=="function"){String.prototype.endsWith=function(v){return this.indexOf(v,this.length-v.length)!==-1}}function i(y){var A="",I="",E,w,v,D,H="",J=NaN;w=document.createElement("div");v=document.querySelectorAll(y);for(var z=0;z<v.length;z++){A+=" "+v.item(z).innerHTML}w.innerHTML=A;D=u(w);for(var z=0;z<D.length;z++){var F=NaN,x=NaN,C;if(a(D[z],"chapternum")){C="1"}else{C=D[z].textContent.trim().split("-")}F=parseInt(C[0].trim());if(isNaN(F)){continue}D[z].parentNode.removeChild(D[z]);if(C.length>1){x=parseInt(C[1].trim())}if(!x||isNaN(x)){x=F}for(var G=F;G<=x;++G){if(isNaN(J)){H+=G}else{if(G==J){}else{if(G-J==1){if(!H.endsWith("-")){H+="-"}}else{if(H.endsWith("-")){H+=J}H+=",";H+=G}}}J=G}}if(H.endsWith("-")&&!isNaN(J)){H+=J}function B(K){var L=w.querySelectorAll(K);for(var M=0;M<L.length;++M){w.removeChild(L[M])}}B(".notelink");B(".footnote");B(".crossreference");I=w.textContent.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"").trim();return{verse:H,text:I}}function s(){var v=i(".selected");if(v.text){var w=document.querySelectorAll(".highlight.selected").length;android.setCopyText(""+w+"\n"+v.verse+"\n"+v.text)}else{android.setCopyText("")}}function g(v){var w=v.className,x;if(a(v,"selected")){x=false}else{x=true}w.match(/\S+/g).forEach(function(B){if(r&&B.indexOf(r)!=-1){var A=document.getElementsByClassName(B);for(var z=A.length-1;z>-1;--z){var y=A.item(z);if(y.nodeName=="SUP"){continue}if(!x){n(y,"selected")}else{if(!a(y,"selected")){m(y,"selected")}}}}});b.setup(s,250)}function h(A){var w="",v,x,B;if(!A){return false}v=document.body.innerHTML;x=v.toLowerCase();B=A.toLowerCase();while(v.length>0){var z=A,y=x.indexOf(B);if(y<0){break}if(v.lastIndexOf(">",y)>=v.lastIndexOf("<",y)){z='<span class="selected">'+A+"</span>"}w+=v.substring(0,y)+z;v=v.substr(y+A.length);x=x.substr(y+A.length)}w+=v;document.body.innerHTML=w;return true}function k(){var w;q();if(verse_start>1){var v=j(r+o+verse_start);if(v.length>0){v[0].scrollIntoView()}}h(search);if(highlighted){d(highlighted)}if(selected){c(selected)}l();w=document.querySelector("#pb-demo");if(w){w.style.display="block"}}function f(y){var x;if(y==undefined){y="highlight"}else{y=y.trim()}x=document.getElementsByClassName(y);for(var w=x.length-1;w>-1;--w){var v=x.item(w);if(v.className.trim()==y&&v.childNodes.length==1&&v.firstChild.nodeType==3){v.parentNode.replaceChild(v.firstChild,v)}else{n(v,y)}}search="";document.normalize()}function l(){document.querySelector("#content").addEventListener("click",function(x){var v=x.target;while(v&&v.nodeName!="BODY"){if(v.nodeName=="A"&&(a(v,"notelink")||(v.parentNode&&v.parentNode.nodeName=="SUP"))){var w=v.hash.replace("#","");if(w){x.preventDefault();android.showAnnotation(w);break}}if(v.nodeName=="SPAN"&&(a(v,"text")||a(v,r,false))){if(search){f("selected")}g(v);break}v=v.parentNode}})}function j(v){var B=document.getElementsByClassName(v);if(B.length){return B}if(v[0]=="v"){var A=["a","b","c"];for(var x in A){B=document.getElementsByClassName(v+A[x]);if(B.length){break}}}else{var y,w,z=new RegExp("(?:^|\\s)"+v+"-\\S+");B=document.querySelectorAll(".text");for(y=0;y<B.length;++y){w=B.item(y).className.match(z);if(w){break}}if(y!=B.length){B=document.getElementsByClassName(w[0])}}return B}function e(w,v,z){var A;if(!w){return}A=j(w);for(var y=A.length-1;y>-1;--y){var x=A.item(y);if(x.nodeName=="SUP"){continue}if(v===false){n(x,z)}else{m(x,z)}}}function m(w,v){if(!w){}else{if(!w.className){w.className=v}else{if(!a(w,v)){w.className+=" "+v}}}}function a(y,x,v){var w;if(!y.className){return false}else{if(v===false){w=new RegExp("(?:^|\\s)"+x)}else{w=new RegExp("(?:^|\\s)"+x+"(?!\\S)")}}return y.className.match(w)!=null}function n(x,w){if(!x||!x.className){}else{var v=new RegExp("(?:^|\\s)"+w+"(?!\\S)");if(x.className.match(v)){x.className=x.className.replace(v,"").trim()}}}function q(){if(r!=undefined&&o!=undefined){return}try{o="-";r=document.querySelector(".text").className.replace(/\s*text\s*/g,"").split(o).splice(0,2).join(o)}catch(v){}try{if(!r||r.indexOf(o)==-1){o="_";r=document.querySelector("sup").className.split(o).splice(0,2).join(o);if(!r||r.indexOf(o)==-1){r="";o=""}}}catch(v){}}function d(x,v,w){q();if(!r){return}if(w===undefined){w="highlight"}x.split(",").forEach(function(z){var A=z.split("-"),B=parseInt(A[0]);if(A.length==2){var y=parseInt(A[1]);for(;B<=y;++B){e(r+o+B,v,w)}}else{e(r+o+B,v,w)}});if(w=="highlight"){android.setHighlighted(i(".highlight").verse)}}function c(w,v){d(w,v,"selected")}window.addEventListener("load",k);window.getFirstVisibleVerse=p;window.highlight=d;window.select=c})();