(function(){if(typeof android==="undefined"){window.android={setVerse:function(o){console.log("android.setVerse: verse")},setCopyText:function(o){console.log("android.setCopyText: "+o)}}}function a(){var p="",o=NaN,s;s=document.querySelectorAll(".pb-verse");for(var r=0;r<s.length;r++){var q=Math.round(s[r].getBoundingClientRect().top);if(q>=0){if(isNaN(o)||Math.abs(o)>3*q){p=s[r].getAttribute("title")}else{p=s[r-1].getAttribute("title")}break}else{o=q}}android.setVerse(p)}if(typeof String.prototype.endsWith!=="function"){String.prototype.endsWith=function(o){return this.indexOf(o,this.length-o.length)!==-1}}function n(){var p="",v="",q,u,r,t="",w=NaN;u=document.createElement("span");r=document.querySelectorAll(".highlight");for(var o=0;o<r.length;o++){p+=" "+r.item(o).innerHTML}q=p.replace(new RegExp('<span class="pb-verse.*?</span>',"gi"),"");u.innerHTML=p;r=u.querySelectorAll(".pb-verse");for(var o=0;o<r.length;o++){var s=parseInt(r.item(o).getAttribute("title"));if(isNaN(s)){continue}if(isNaN(w)){t+=s}else{if(s-w==1){if(!t.endsWith("-")){t+="-"}}else{if(t.endsWith("-")){t+=w}t+=",";t+=s}}w=s}if(t.endsWith("-")&&!isNaN(w)){t+=w}j(t,true);u.innerHTML=q;v=u.textContent.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");if(v){android.setCopyText(t+"\n"+v)}else{android.setCopyText("")}}function m(o){var p=o.className,q;if(o.className.match(/(?:^|\s)highlight(?!\S)/)){q=false;o.className=o.className.replace(/(?:^|\s)highlight(?!\S)/g,"")}else{q=true;o.className+=" highlight"}p.split(" ").forEach(function(u){if(i&&u.indexOf(i)!=-1){var t=document.querySelectorAll("."+u);for(var s=0;s<t.length;++s){var r=t.item(s);if(!q){r.className=r.className.replace(/(?:^|\s)highlight(?!\S)/g,"")}else{if(r.className.indexOf(" highlight")==-1){r.className+=" highlight"}}}}});c.setup(n,250)}function h(q,p,o){var r=" "+p;if(o){r+=" "}return(" "+q.className+" ").replace(/[\t\r\n]/g," ").indexOf(r)>=0}function f(t){var p="",o,q,u;if(!t){return false}o=document.body.innerHTML;q=o.toLowerCase();u=t.toLowerCase();while(o.length>0){var s=t;var r=q.indexOf(u);if(r<0){break}if(o.lastIndexOf(">",r)>=o.lastIndexOf("<",r)){s='<span class="highlight">'+t+"</span>"}p+=o.substring(0,r)+s;o=o.substr(r+t.length);q=q.substr(r+t.length)}p+=o;document.body.innerHTML=p;return true}function l(){if(verse_start>1){window.location.hash="#"+versename+"-"+verse_start}g();f(search);if(highlighted){j(highlighted)}b();var o=document.querySelector("#pb-demo");if(o){o.style.display="block"}}function k(){var q=document.querySelectorAll(".highlight");for(var p=0;p<q.length;++p){var o=q.item(p);if(o.className=="highlight"){o.parentNode.replaceChild(o.firstChild,o)}else{o.className=o.className.replace(/(?:^|\s)highlight(?!\S)/g,"")}}search="";document.normalize()}function b(){document.querySelector("#content").addEventListener("click",function(p){var o=p.target;while(o&&o.nodeName!="BODY"){if(o.nodeName=="SPAN"&&(h(o,"text",true)||h(o,"v",false))){if(search){k()}m(o);break}o=o.parentNode}})}var c={setup:function(p,o){this.cancel();this.timeoutID=window.setTimeout(function(q){q()},o,p)},cancel:function(){if(typeof this.timeoutID=="number"){window.clearTimeout(this.timeoutID);delete this.timeoutID}}};function d(o){var r=document.querySelectorAll("."+o);if(!r){return}for(var q=0;q<r.length;++q){var p=r.item(q);if(p.className.indexOf("highlight")==-1){p.className+=" highlight"}}}var i,e;function g(){if(i!=undefined&&e!=undefined){return}try{e="_";i=document.querySelector("sup").querySelector("strong").className.split("_").splice(0,2).join("_")}catch(o){}try{if(!i||i.indexOf("_")==-1){e="-";i=document.querySelector(".text").className.replace(/\s*text\s*/g,"").split("-").splice(0,2).join("-");if(!i||i.indexOf("-")==-1){i="";e=""}}}catch(o){}}function j(p,o){g();if(!i){return}if(o===true){k()}p.split(",").forEach(function(r){var s=r.split("-");var t=parseInt(s[0]);if(s.length==2){var q=parseInt(s[1]);for(;t<=q;++t){d(i+e+t)}}else{d(i+e+t)}})}window.addEventListener("load",l);window.getFirstVisibleVerse=a;window.unhighlight=k;window.highlight=j})();